<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>ƒê·ªÅ S·ªë 1 - M√¥n Anh</title>
    <link rel="stylesheet" href="allStyle.css" />
  </head>
  <body>
    <div id="giaoDienThi">
    <h1>üìù ƒê·ªÅ Thi S·ªë 1 - M√¥n Anh</h1>

     <div class="menu">
            <a href="trangchu.html">
                <img src="home.png" alt="Home" width="40">
            </a>
            <div class="dropdown">
                <div class="dropdown-title">To√°n</div>
                <ul class="dropdown-menu">
                    <li><a href="de1Toan.html" >ƒê·ªÅ #01</a></li>
                    <li><a href="de2Toan.html" >ƒê·ªÅ #02</a></li>
                    <li><a href="de3Toan.html" >ƒê·ªÅ #03</a></li>
                </ul>
            </div>      

            <div class="dropdown">
                <div class="dropdown-title">V·∫≠t l√Ω</div>
                <ul class="dropdown-menu">
                   <li><a href="de1Ly.html" >ƒê·ªÅ #01</a></li>
                   <li><a href="de2Ly.html" >ƒê·ªÅ #02</a></li>
                   <li><a href="de3Ly.html" >ƒê·ªÅ #03</a></li>
                </ul>
            </div> 

            <div class="dropdown">
                <div class="dropdown-title">Ho√° h·ªçc</div>
                <ul class="dropdown-menu">
                    <li><a href="de1Hoa.html" >ƒê·ªÅ #01</a></li>
                    <li><a href="de2Hoa.html" >ƒê·ªÅ #02</a></li>
                    <li><a href="de3Hoa.html" >ƒê·ªÅ #03</a></li>
                </ul>
            </div>

            <div class="dropdown">
                <div class="dropdown-title">Sinh h·ªçc</div>
                <ul class="dropdown-menu">
                    <li><a href="de1Sinh.html" >ƒê·ªÅ #01</a></li>
                    <li><a href="de2Sinh.html" >ƒê·ªÅ #02</a></li>
                    <li><a href="de3Sinh.html" >ƒê·ªÅ #03</a></li>
                </ul>
            </div>

            <div class="dropdown">
                <div class="dropdown-title">Ti·∫øng anh</div>
                <ul class="dropdown-menu">
                    <li><a href="de1Anh.html" >ƒê·ªÅ #01</a></li>
                    <li><a href="de2Anh.html" >ƒê·ªÅ #02</a></li>
                    <li><a href="de3Anh.html" >ƒê·ªÅ #03</a></li>
                </ul>
            </div>
        </div>
    <p>‚è∞ Th·ªùi gian c√≤n l·∫°i: <span id="demNguoc">00:00</span></p>
    <p>üßÆ S·ªë c√¢u h·ªèi: <span id="soCauHoi"></span></p>

    <div id="deThi"></div>
    <!-- V·ªã tr√≠ hi·ªÉn th·ªã c√¢u h·ªèi -->

    <div id="ketQua" style="margin-top: 20px"></div>

    <button class="subMit">N·ªôp b√†i</button>
</div>

    <script>
      // Danh s√°ch c√¢u h·ªèi
const cauHoiList = [
        {
    id: "q1",
    question: "Choose the word with the underlined part pronounced differently: *ch*emistry, *ch*arity, *ch*air, *ch*ild",
    options: { A: "chemistry", B: "charity", C: "chair", D: "child" },
    answer: "A"
  },
  {
    id: "q2",
    question: "My brother stopped ______ to music because he was too tired.",
    options: { A: "listening", B: "to listen", C: "listen", D: "listened" },
    answer: "A"
  },
  {
    id: "q3",
    question: "You had better ______ at home until you feel better.",
    options: { A: "stay", B: "to stay", C: "staying", D: "stayed" },
    answer: "A"
  },
  {
    id: "q4",
    question: "He is the last person ______ I would trust.",
    options: { A: "who", B: "that", C: "whom", D: "√ò" },
    answer: "D"
  },
  {
    id: "q5",
    question: "The new airport will be built ______ the plan.",
    options: { A: "according to", B: "because of", C: "due to", D: "in spite of" },
    answer: "A"
  },
  {
    id: "q6",
    question: "Find the word OPPOSITE in meaning to: *The boy was very rude to the teacher.*",
    options: { A: "impolite", B: "careful", C: "polite", D: "honest" },
    answer: "C"
  },
  {
    id: "q7",
    question: "Tom is not used to ______ in public.",
    options: { A: "speak", B: "spoke", C: "speaking", D: "speaks" },
    answer: "C"
  },
  {
    id: "q8",
    question: "Choose the correct structure: It was not until 2000 ______ he graduated.",
    options: { A: "when", B: "that", C: "which", D: "where" },
    answer: "B"
  },
  {
    id: "q9",
    question: "Choose the correct tag question: Let‚Äôs go out, ______?",
    options: { A: "shall we", B: "will we", C: "do we", D: "can we" },
    answer: "A"
  },
  {
    id: "q10",
    question: "They haven‚Äôt seen each other ______ a long time.",
    options: { A: "since", B: "before", C: "until", D: "for" },
    answer: "D"
  },
  {
    id: "q11",
    question: "I will call you as soon as he ______.",
    options: { A: "arrives", B: "will arrive", C: "is arriving", D: "arrived" },
    answer: "A"
  },
  {
    id: "q12",
    question: "This is the first time I ______ sushi.",
    options: { A: "try", B: "have tried", C: "tried", D: "was trying" },
    answer: "B"
  },
  {
    id: "q13",
    question: "Choose the correct preposition: She is very keen ______ music.",
    options: { A: "with", B: "on", C: "of", D: "at" },
    answer: "B"
  },
  {
    id: "q14",
    question: "Mary said, ‚ÄúI‚Äôm going to visit my aunt tomorrow.‚Äù",
    options: {
      A: "Mary said she is going to visit her aunt the next day.",
      B: "Mary said she was going to visit her aunt the next day.",
      C: "Mary said she would visit her aunt tomorrow.",
      D: "Mary said she goes to visit her aunt tomorrow."
    },
    answer: "B"
  },
  {
    id: "q15",
    question: "John has lived in this town ______ he was ten.",
    options: { A: "since", B: "when", C: "until", D: "for" },
    answer: "A"
  },
  {
    id: "q16",
    question: "He didn't go to the party because he was tired.",
    options: {
      A: "If he wasn't tired, he would go to the party.",
      B: "If he weren't tired, he would have gone to the party.",
      C: "If he hadn‚Äôt been tired, he would have gone to the party.",
      D: "If he had been tired, he wouldn't go to the party."
    },
    answer: "C"
  },
  {
    id: "q17",
    question: "Which word is CLOSEST in meaning to: *accelerate*?",
    options: { A: "hurry", B: "slow down", C: "reduce", D: "decrease" },
    answer: "A"
  },
  {
    id: "q18",
    question: "Choose the word with different stress: *student*, *teacher*, *involve*, *father*",
    options: { A: "student", B: "teacher", C: "involve", D: "father" },
    answer: "C"
  },
  {
    id: "q19",
    question: "She suggested ______ to the cinema.",
    options: { A: "to go", B: "going", C: "go", D: "went" },
    answer: "B"
  },
  {
    id: "q20",
    question: "I like pop music, ______ my brother prefers rock.",
    options: { A: "and", B: "so", C: "but", D: "because" },
    answer: "C"
  },
  {
    id: "q21",
    question: "The man ______ lives next door is very friendly.",
    options: { A: "which", B: "who", C: "whom", D: "whose" },
    answer: "B"
  },
  {
    id: "q22",
    question: "He speaks English ______ than I do.",
    options: { A: "good", B: "well", C: "better", D: "best" },
    answer: "C"
  },
  {
    id: "q23",
    question: "I remember ______ you the key yesterday.",
    options: { A: "give", B: "to give", C: "gave", D: "giving" },
    answer: "D"
  },
  {
    id: "q24",
    question: "Choose the correct form: She didn't go to school, ______?",
    options: { A: "did she", B: "didn't she", C: "does she", D: "was she" },
    answer: "A"
  },
  {
    id: "q25",
    question: "We should concentrate ______ the lesson.",
    options: { A: "on", B: "in", C: "to", D: "at" },
    answer: "A"
  },
  {
    id: "q26",
    question: "Tom and Jerry are talking about their plan. Jerry says: 'Shall we go camping tomorrow?' Tom replies:",
    options: { A: "That‚Äôs a good idea.", B: "No, you shall not.", C: "Yes, we shall.", D: "That‚Äôs impossible." },
    answer: "A"
  },
  {
    id: "q27",
    question: "The doctor advised him ______ smoking.",
    options: { A: "stop", B: "to stop", C: "stopping", D: "stopped" },
    answer: "B"
  },
  {
    id: "q28",
    question: "He arrived ______ the station in time to catch the train.",
    options: { A: "in", B: "at", C: "to", D: "on" },
    answer: "B"
  },
  {
    id: "q29",
    question: "Your car is more economical, but ______ is faster.",
    options: { A: "my", B: "mine", C: "me", D: "I" },
    answer: "B"
  },
  {
    id: "q30",
    question: "He didn‚Äôt go to school ______ he was sick.",
    options: { A: "although", B: "because", C: "despite", D: "but" },
    answer: "B"
  },
  {
    id: "q31",
    question: "I ______ my homework when my friend came.",
    options: { A: "finished", B: "was finishing", C: "have finished", D: "am finishing" },
    answer: "B"
  },
  {
    id: "q32",
    question: "She has just bought ______.",
    options: { A: "a new interesting book", B: "an interesting new book", C: "book interesting new", D: "new interesting book" },
    answer: "B"
  },
  {
    id: "q33",
    question: "She said she ______ to Ha Noi the next day.",
    options: { A: "would go", B: "goes", C: "will go", D: "went" },
    answer: "A"
  },
  {
    id: "q34",
    question: "He worked hard ______ he passed the exam.",
    options: { A: "because", B: "so", C: "but", D: "although" },
    answer: "B"
  },
  {
    id: "q35",
    question: "This is the house ______ I was born.",
    options: { A: "where", B: "which", C: "that", D: "whose" },
    answer: "A"
  },
  {
    id: "q36",
    question: "Choose the correct sentence: /It / is / said / the / man / to / be / rich/",
    options: {
      A: "It is said to be rich the man.",
      B: "It is said the man to be rich.",
      C: "The man is said to be rich.",
      D: "It is said the man be rich."
    },
    answer: "C"
  },
  {
    id: "q37",
    question: "She prefers tea ______ coffee.",
    options: { A: "for", B: "than", C: "to", D: "rather" },
    answer: "C"
  },
  {
    id: "q38",
    question: "The film was ______ that I watched it twice.",
    options: { A: "so interesting", B: "too interesting", C: "such interesting", D: "very interesting" },
    answer: "A"
  },
  {
    id: "q39",
    question: "I regret ______ you the truth.",
    options: { A: "not to tell", B: "not tell", C: "not telling", D: "not to telling" },
    answer: "C"
  },
  {
    id: "q40",
    question: "Choose the word CLOSEST in meaning to: *vacant*",
    options: { A: "occupied", B: "empty", C: "full", D: "busy" },
    answer: "B"
  }

];

// Hi·ªÉn th·ªã ƒë·ªÅ thi
function hienThiDe(cauHoiList) {
  const deThiDiv = document.getElementById("deThi"); 
  deThiDiv.innerHTML = "";
  cauHoiList.forEach((cauHoi, thuTuCau) => {
    let str = `<p><strong>C√¢u ${thuTuCau + 1}:</strong> ${cauHoi.question}</p>`;
    for (let luaChon in cauHoi.options) {
      str += `
        <label>
          <input type="radio" name="${cauHoi.id}" value="${luaChon}">
           ${luaChon}. ${cauHoi.options[luaChon]}
        </label><br>`;
    }
    deThiDiv.innerHTML += str + "<br>";
  });
}

// Ch·∫•m ƒëi·ªÉm
function chamDiem() {
  let soCauDung = 0;
  cauHoiList.forEach((cauHoi) => {
    let luaChon = document.querySelector(`input[name="${cauHoi.id}"]:checked`);
    if (luaChon && luaChon.value === cauHoi.answer) {
      soCauDung++;
    }
  });
  //hi·ªÉn th·ªã k·∫øt qu·∫£ ra m√†n h√¨nh
document.getElementById("ketQua").innerHTML = 
  `‚úÖ B·∫°n l√†m ƒë√∫ng <strong>${soCauDung}/${soCau}</strong> c√¢u.`;

alert(`‚úÖB·∫°n l√†m ƒë√∫ng ${soCauDung}/${soCau} c√¢u.`);
}


// Kh√≥a l·ª±a ch·ªçn
function khoaLuaChon() {
  let tatCa = document.querySelectorAll('input[type="radio"]');
  tatCa.forEach((input) => (input.disabled = true));
}
document.querySelector(".subMit").addEventListener("click", function () {
  chamDiem(); //ch·∫•m ƒëi·ªÉm
  clearInterval(demNguoc); //d·ª´ng ƒë·∫øm ng∆∞·ª£c
  khoaLuaChon(); //kh√≥a ƒë√°p √°n
});

// ƒê·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c
const soCau = parseInt(localStorage.getItem("soCauHoi") || "10");
let thoiGian = soCau * 3 * 60; // m·ªói c√¢u 3 ph√∫t -> t·ªïng th·ªùi gian l√†m b√†i
const dongHo = document.getElementById("demNguoc");
let demNguoc = setInterval(() => {
  let phut = Math.floor(thoiGian / 60); // t√≠nh ph√∫t
  let giay = thoiGian % 60; // t√≠nh gi√¢y
  dongHo.textContent = `${phut.toString().padStart(2, "0")}:${giay
    .toString()
    .padStart(2, "0")}`;

  thoiGian--; // Gi·∫£m th·ªùi gian xu·ªëng

  if (thoiGian < 0) {
    clearInterval(demNguoc);
    chamDiem(); //ch·∫•m ƒëi·ªÉm
    khoaLuaChon(); //kh√≥a l·ª±a ch·ªçn
  }
}, 1000);

document.getElementById("soCauHoi").textContent = cauHoiList.length;

      document.addEventListener("DOMContentLoaded", function () {
        const soCau = parseInt(localStorage.getItem("soCauHoi") || "10");
        document.getElementById("soCauHoi").textContent = soCau;

        // Ch·ªâ ti·∫øp t·ª•c n·∫øu c√≥ danh s√°ch c√¢u h·ªèi
        if (Array.isArray(cauHoiList)) {
          // C·∫Øt danh s√°ch theo s·ªë c√¢u
          const danhSachRutGon = cauHoiList.slice(0, soCau);

          // G·ªçi l·∫°i h√†m hi·ªÉn th·ªã ƒë·ªÅ v·ªõi s·ªë c√¢u ƒë√£ ch·ªçn
          hienThiDe(danhSachRutGon);

          // Ghi ƒë√® l·∫°i s·ª± ki·ªán "N·ªôp b√†i"
          document.querySelector(".subMit").onclick = function () {
            let dung = 0;
            danhSachRutGon.forEach((cau) => {
              const luaChon = document.querySelector(
                `input[name="${cau.id}"]:checked`
              );
              if (luaChon && luaChon.value === cau.answer) {
                dung++;
              }
            });

      
          };
        } else {
          document.getElementById("deThi").innerHTML =
            "<p>L·ªói: Kh√¥ng t√¨m th·∫•y danh s√°ch c√¢u h·ªèi.</p>";
        }
      });

    //PH·∫¶N TH√äM C√ÇU H·ªéI
      let cauNguoiDungThem=[]; //M·∫£ng r·ªóng ƒë·ªÉ l∆∞u c√¢u h·ªèi ng∆∞·ªùi d√πng th√™m 
      let goc=localStorage.getItem("cauHoiThem_AnhDe1"); //l·∫•y d·ªØ li·ªáu t·ª´ localStorage v·ªõi key l√† "cauHoiThem"(ch∆∞a c√≥ d·ªØ li·ªáu th√¨ raw s·∫Ω null)
      if (goc)
      {
        let dsChuoi=goc.split("#"); //c·∫Øt chu·ªói ra th√†nh m·∫£ng,"#" ngƒÉn c√°ch gi·ªØa c√°c c√¢u h·ªèi
        dsChuoi.forEach(function(chuoi) //duy·ªát qua t·ª´ng ph·∫ßn t·ª≠ trong m·∫£ng "chuoi"
        {
          if (chuoi.trim()==="") //xo√° kho·∫£ng tr·∫Øng ƒë·∫ßu cu·ªëi c·ªßa m·∫£ng, n·∫øu m·∫£ng ko c√≥ g√¨ s·∫Ω b·ªè qua
          return;

          let parts=chuoi.split("|"); //chia ra m·ªói ph·∫ßn ngƒÉn c√°ch nhau b·∫±ng d·∫•u "|"
          
          if (parts.length===6) //n·∫øu ƒë·ªß 6 ph·∫ßn 
        {
          //Th√™m c√¢u h·ªèi v√†o m·∫£ng "cauNguoiDungThem"
          cauNguoiDungThem.push 
          (
          {
            id:"q"+(cauHoiList.length+1),
            question: parts[0],
            options: {
              A:parts[1],
              B:parts[2],
              C:parts[3],
              D:parts[4],
            },
            answer:parts[5],
          });
        }
        });
      }
      //Th√™m c√¢u h·ªèi v√†o ng√¢n h√†ng
      //Duy·ªát qua t·ª´ng ph·∫ßn t·ª≠ trong cauNguoiDungThem
      //"c" l√† c√¢u h·ªèi ng∆∞·ªùi d√πng ƒë√£ th√™m
      cauNguoiDungThem.forEach(function(c){
        cauHoiList.push(c);
      });

      //GIAO DI·ªÜN TH√äM C√ÇU H·ªéI
      const giaoDienThem = document.createElement("div"); //t·∫°o m·ªôt th·∫ª div
      //giao di·ªán html c·ªßa th√™m c√¢u h·ªèi
      giaoDienThem.innerHTML=`
      <div class="khungChinh">
  
  
  <button id="themCauHoi">Th√™m c√¢u h·ªèi</button>
  
  <div id="giaoDienThemCauHoi" class="hidden">
    <hr>
    <h2>Th√™m C√¢u H·ªèi M·ªõi</h2>
    
    <label class="nhanInput">üìùC√¢u h·ªèi:</label>
    <input type="text" id="cauHoiMoi" placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n...">
    
    <div class="khungDapAn">
      <div>
        <label class="nhanInput">üÖ∞ ƒê√°p √°n A:</label>
        <input type="text" id="optA" placeholder="Nh·∫≠p ƒë√°p √°n A...">
      </div>
      <div>
        <label class="nhanInput">üÖ± ƒê√°p √°n B:</label>
        <input type="text" id="optB" placeholder="Nh·∫≠p ƒë√°p √°n B...">
      </div>
      <div>
        <label class="nhanInput">üÖ≤ ƒê√°p √°n C:</label>
        <input type="text" id="optC" placeholder="Nh·∫≠p ƒë√°p √°n C...">
      </div>
      <div>
        <label class="nhanInput">üÖ≥ ƒê√°p √°n D:</label>
        <input type="text" id="optD" placeholder="Nh·∫≠p ƒë√°p √°n D...">
      </div>
    </div>
    
    <label class="nhanInput">ƒê√°p √°n ƒë√∫ng:</label>
    <select id="cauDung">
      <option value="correct">--Ch·ªçn ƒë√°p √°n ƒë√∫ng--</option>
      <option value="A">üÖ∞ ƒê√°p √°n A</option>
      <option value="B">üÖ±ƒê√°p √°n B</option>
      <option value="C">üÖ≤ ƒê√°p √°n C</option>
      <option value="D">üÖ≥ ƒê√°p √°n D</option>
    </select>
    
    <div class="khungNutBam">
      <button id="nutThem">Th√™m</button>
      <button id="nutQuayLai">Quay l·∫°i</button>
      <button id="nutXoa">üóë X√≥a c√¢u ƒë√£ th√™m</button>
    </div>
    
    <p id="thongBao"></p>
  </div>
</div>

      `;
      document.body.appendChild(giaoDienThem); //th√™m "giaoDienThem" v√†o body c·ªßa html

      // n√∫t th√™m c√¢u h·ªèi c√≥ id="themCauHoi"
      //khi ng∆∞·ªùi d√πng ch·ªçn "Th√™m c√¢u h·ªèi" th√¨ s·∫Ω qua giao di·ªán th√™m c√¢u h·ªèi
document.getElementById("themCauHoi").addEventListener("click", function() {
    // ·∫®n ph·∫ßn thi
    document.getElementById("giaoDienThi").classList.add("hidden");

    // Hi·ªán ph·∫ßn th√™m c√¢u h·ªèi
    document.getElementById("giaoDienThemCauHoi").classList.remove("hidden");
});

  //n√∫t quay l·∫°i giao di·ªán thi
document.getElementById("nutQuayLai").addEventListener("click", function() {
    document.getElementById("giaoDienThemCauHoi").classList.add("hidden");
    document.getElementById("giaoDienThi").classList.remove("hidden");
});

      //X·ª≠ l√Ω n√∫t th√™m
      //L·∫•y gi√° tr·ªã t·ª´ "nutThem",xo√° kho·∫£ng tr·∫Øng ngƒÉn ch·∫∑n ng∆∞·ªùi d√πng ko ghi c√¢u h·ªèi
      document.getElementById("nutThem").addEventListener("click",function(){
  const question = document.getElementById("cauHoiMoi").value.trim();
  const a = document.getElementById("optA").value.trim();
  const b = document.getElementById("optB").value.trim();
  const c = document.getElementById("optC").value.trim();
  const d = document.getElementById("optD").value.trim(); 
  const ans = document.getElementById("cauDung").value;
  //Th√¥ng b√°o n·∫øu ko nh·∫≠p ƒë·∫ßu ƒë·ªß
  if (!question || !a || !b || !c || !d || !ans) {
    document.getElementById("thongBao").textContent = "‚ùå Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß!";
    return;
  }
  
  const cauChuoi = `${question}|${a}|${b}|${c}|${d}|${ans}`;//l∆∞u d∆∞·ªõi ƒë·ªãnh d·∫°ng
  let cauHoiCuDaThem = localStorage.getItem("cauHoiThem_AnhDe1") || "";//l·∫•y nh·ªØng c√¢u h·ªèi c≈© ƒë√£ th√™m tr∆∞·ªõc ƒë√≥ c·ªßa ng∆∞·ªùi d√πng(n·∫øu c√≥), n·∫øu ko c√≥ th√¨ s·∫Ω NULL
  localStorage.setItem("cauHoiThem_AnhDe1", cauHoiCuDaThem + cauChuoi + "#");
  document.getElementById("thongBao").textContent = "‚úÖ ƒê√£ th√™m. T·∫£i l·∫°i ƒë·ªÉ th·∫•y c√¢u m·ªõi.";

  // XO√Å C√ÇU H·ªéI
  //Duy·ªát qua t·ª´ng m·∫£ng ch·ª©a c√°c id m√† ng∆∞·ªùi d√πng ƒë√£ nh·∫≠p v√† g√°n gi√° tr·ªã r·ªóng cho t·ª´ng id
  ["cauHoiMoi", "optA", "optB", "optC", "optD"].forEach(function(id) {document.getElementById(id).value = "";
});
  document.getElementById("cauDung").value = "";//reset dropdown ph·∫ßn ch·ªçn ƒë√°p √°n
      });

//N√∫t Xo√°
document.getElementById("nutXoa").addEventListener("click", function(){
  if (confirm("B·∫°n ch·∫Øc ch·∫Øn mu·ªën xo√° to√†n b·ªô c√¢u h·ªèi ƒë√£ th√™m?")) {
    localStorage.removeItem("cauHoiThem_AnhDe1");
    location.reload();
  }
});
    </script>
  </body>
</html>
  

